#include <iostream>
#include <string>
#include <ctime>
#include <fstream>
#include <queue>
#include <vector>
#include <limits>

#ifdef _WIN32
#include <windows.h>
#else
#include <unistd.h>
#endif

using namespace std;

class Transaction {
public:
    string ownerName;
    int type;
    int lama;
    int biaya;
    string tgl_masuk;
    int spot;
    string spotLocation;

    void calculateFee() {
        if (type == 1) {
            if (lama >= 1 && lama < 6) {
                biaya = lama * 2000;
            } else {
                biaya = 12000;
            }
        } else if (type == 2) {
            if (lama >= 1 && lama < 6) {
                biaya = lama * 4000;
 } else {
                biaya = 24000;
            }
        }
    }
};
using namespace std;

ofstream outputFile("transaksi.txt", ios::app);

struct User {
    string username;
    string password;
};

class ParkingSpot {
public:
    string location;
    bool isAvailable;

    ParkingSpot(string loc) : location(loc), isAvailable(true) {}
};

void registerUser() {
    User user;
    cout << "\n\n\n\t\t\t ðŸŒŸðŸŒŸðŸŒŸ REGISTER ðŸŒŸðŸŒŸðŸŒŸ  \t\t\t\t \n";
cout << "\n\t\t\t Buat Username : ";
cin >> user.username;
cout << "\n\t\t\t Buat Password : ";

    cin >> user.password;

    ofstream userFile("users.txt", ios::app);
    userFile << user.username << " " << user.password << endl;
    userFile.close();

cout << "\n\n User berhasil didaftarkan.\n\n";
}

bool loginUser(User& currentUser) {
    cout << "\n\n\n \t\t\t ðŸŒŸðŸŒŸðŸŒŸ LOGIN SISTEM PARKIR ðŸŒŸðŸŒŸðŸŒŸ  \t\t\t\t \n";
    cout << "\n \t\t\t Username : ";
    cin >> currentUser.username;
    cout << "\n \t\t\t Password : ";
    cin >> currentUser.password;

    ifstream userFile("users.txt");
    string usernameFromFile, passwordFromFile;
    while (userFile >> usernameFromFile >> passwordFromFile) {
        if (usernameFromFile == currentUser.username && passwordFromFile == currentUser.password) {
            return true;
        }
    }
    userFile.close();
    return false;
}

int divideAndConquerSum(Transaction trx[], int start, int end) {
    if (start > end) {
        return 0;
    }
    if (start == end) {
return trx[start].biaya;
    }
    int mid = (start + end) / 2;
    int leftSum = divideAndConquerSum(trx, start, mid);
    int rightSum = divideAndConquerSum(trx, mid + 1, end);
    return leftSum + rightSum;
}
void clearScreen() {
#ifdef _WIN32
    system("cls");
#else
    cout << "\033[2J\033[1;1H";
#endif
}

void clearInputBuffer() {
    cin.ignore(numeric_limits<streamsize>::max(), '\n');
}

string generateBarcode(int length) {
    string barcode;
    for (int i = 0; i < length; ++i) {
        barcode += (i % 2 == 0) ? "|" : ":";
    }
    return barcode;
}

void printReceipt(const ParkingSpot &spot) {
    cout << "\n\n\t\t\t======= ðŸ…¢ðŸ…£ðŸ…¡ðŸ…¤ðŸ…š ðŸ…ŸðŸ…ðŸ…¡ðŸ…šðŸ…˜ðŸ…¡ =======\n";
    cout << "\t\t\t Lokasi Parkir: " << spot.location << "\n";
    cout << "\t\t\t Barcode: " << generateBarcode(12) << "\n";
    cout << "\t\t\t=======================================\n\n";
}

int main() {

void printReceipt(const ParkingSpot &spot) {
    cout << "\n\n\t\t\t======= ðŸ…¢ðŸ…£ðŸ…¡ðŸ…¤ðŸ…š ðŸ…ŸðŸ…ðŸ…¡ðŸ…šðŸ…˜ðŸ…¡ =======\n";
    cout << "\t\t\t Lokasi Parkir: " << spot.location << "\n";
    cout << "\t\t\t Barcode: " << generateBarcode(12) << "\n";
    cout << "\t\t\t=======================================\n\n";
}

int main() {
    vector<ParkingSpot> parkingSpots = {
        ParkingSpot("A1FM"), ParkingSpot("A2FM"), ParkingSpot("B1FM"), ParkingSpot("B2FM"),
        ParkingSpot("C1FM"), ParkingSpot("C2FM"), ParkingSpot("D1FM"), ParkingSpot("D2FM"),
        ParkingSpot("E1FM"), ParkingSpot("E2FM"), ParkingSpot("F1FM"), ParkingSpot("F2FM"),
        ParkingSpot("G1FM"), ParkingSpot("G2FM"), ParkingSpot("H1FM"), ParkingSpot("H2FM"),
        ParkingSpot("I1FM"), ParkingSpot("I2FM"), ParkingSpot("J1FM"), ParkingSpot("J2FM")
    };

    Transaction trx[100];
    queue<Transaction> trxQueue;
    User currentUser;
    char yn;
    int pil, m = -1, total = 0;

    registerUser();

